<div class='page-header'>
  <h1>HappyPosts</h1>
  <h5>Built using Rails + AngularJS</h5>
</div>

<form class='well' ng-submit="addPost()">
  <h3 style='margin-top: 0px;'>Add a new post</h3>
  <div class="form-group">
    <input type='text' class="form-control" placeholder="Title" ng-model="title"></input>
  </div>
  <div class="form-group">
    <input type='text' class="form-control" placeholder="Enter a short description" ng-model="description"></input>
  </div>
  <div class='form-group'>
    <input type='text' class="form-control" placeholder="Optional link" ng-model="link"></input>
  </div>
  <button type='submit' class="btn btn-primary">
  <span class="glyphicon glyphicon-plus" aria-hidden="true" style='margin-right:5px;'></span>
  Add Post</button>
</form>

<div ng-repeat="post in posts">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        <a ng-show='post.link' href="{{post.link}}">{{post.title}}</a>
        <span ng-hide='post.link'>{{post.title}}</span>
        <span class="glyphicon glyphicon-thumbs-up" ng-click='incrementUpvotes(post)'  style='margin-left: 10px;'></span>
      </h3>
    </div>
    <div class="panel-body">
      <p class='small'>Posted by <a ng-href="#/users/{{post.user.username}}">{{post.user.username}}</a></p>
      <span>{{post.description}}</span>
    </div>
      <div class="panel-footer">
        <span class='small'><a href="#/posts/{{post.id}}">Comments</a> - upvotes: {{post.upvotes}}</span>
    </div>
  </div>
</div>
